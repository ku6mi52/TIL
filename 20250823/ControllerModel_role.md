# Railsのコントローラとモデルの責務

## Controllerの責務 
ModelとViewの仲介としてデータのやり取りをする。コントローラがモデルのデータをビューで利用可能にすることで、データをビューで表示したり、入力されたデータでモデルを更新したりする。  
チェックや受け渡し、整頓、呼び出しといったことが多く行われる。

- ビューからの入力値の整形とバリデーション
- ビューからの入力値のセキュリティチェック(strong parameters)
- その他、CSRF対策などのセキュリティチェック
- ユーザー等の認証処理
- ビュー層への認可状況の定義と受け渡し
- モデル層のデータの呼び出し
- モデル層で完結しない一連の処理の呼び出し
  - 複数モデルにまたがる、多くはトランザクションを必要とする処理
  - 通知などを伴う処理など 
- 外部APIの呼び出し
- ビュー層へ受け渡すための情報の整形
- 状態に応じたリダイレクト等の管理


### CRUD処理
Create, Read, Update, Deleteという主機能。  
以下はrails推奨の7つの機能である。
#### 一覧データの表示と作成
- index（データの一覧を表示）  
- new （データを新規作成するためのフォームを表示）
- create （データを新規作成し、データベースへ保存）

#### データの更新と削除 
- show （指定したデータを表示）
- edit （データを更新するためのフォームを表示）
- update （データ更新）
- destroy （データ削除）

## Modelの責務 

## まとめ 
### コントローラの責務 
- リクエスト（入力）を受け取る
- 必要なモデルを呼び出す
- ビューに渡すデータを準備する(ビューへの受け渡し)
- 遷移先を決める（render / redirect）
- セッションやパラメータの管理  

入力を受け取り、処理の流れを制御する。

### モデルの役割
- DBとのやりとり（CRUD）
- バリデーション
- ビジネスロジック（アプリ固有のルール）
- 関連付け（アソシエーション）
- スコープや検索クエリ

データとビジネスルールを表現する。


## 参考 
<a>https://qiita.com/kandalog/items/883cefeaa27a344c56a5</a>  
<a>https://qiita.com/MasashiFujiike/items/5c1c3e92c0289812a952</a>  
<a>https://railsguides.jp/action_controller_overview.html</a>

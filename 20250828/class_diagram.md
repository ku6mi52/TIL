# クラス図 

## クラス図とは
「クラス」とは、オブジェクト指向における「クラス」（プログラミングでつくるオブジェクトの設計図）のこと。クラス図の構造は、上段に「クラス名」、中段に「属性」、下段に「操作」。  
クラス図のメリットは、開発予定のシステム構造を可視化できるということである。  
ユースケース図は、アプリが「何を提供するか」を利用者目線でまとめる図であるのに対して、クラス図は、アプリが「どんなデータ構造で成り立っているか」を開発者目線でまとめる図である。

## クラス図の書き方
### 構成要素 
1つのクラスにつき1つの枠線を用意し、その枠内に上段・中段・下段の構成要素を設定する。  
- 上段「クラス名」（記述形式「パッケージ名：クラス名」、パッケージ名は省略可能）
- 中段「クラス属性」（記述形式「可視性 属性名：型 = 初期値 {制約条件}」、属性名以外は省略可能）
- 下段「操作・メソッド」（記述形式「可視性 メソッド名（引数変数名：引数型）：戻り値の型」、メソッド名以外は省略可能）

### 手順 
#### 1. クラスの洗い出し 
プロジェクトに必要なクラス・属性をすべて洗い出し、上段・中段・下段の要素をすべて定義する。  
上段「クラス名」での検討ポイントは以下の通りである。  
- 「単一のクラス名で複数の内容を指していないか」
- 「似たクラスがあって役割が被っていないか」
- 「作成予定のシステムと書き出したクラスとの関連は本当に確かか」  

中段「クラス定義に必要な属性名」には、属性名の右側にデータ型と初期値を書いておく。  

下段「各クラスで実行するメソッド名や引数」には、操作終了時に返す戻り値も書く。戻り値がない場合は、「void」と記入。

#### 2.アクセス範囲を表す「可視性」の記入
可視性とは、クラス図内の特定の属性・操作（メソッド）について「どのクラスからアクセスできるか」を指定するもの。  
可視性をクラス図上で表すときに使う記号は以下の4種類である。  
- 「+」全クラスからアクセス可能（public）
- 「-」自分のクラス限定でアクセス可能（private）
- 「#」自クラスと親クラス限定でアクセス可能（protected）
- 「~」同一パッケージ内のクラスのみアクセス可能（package）  

これらの記号を属性名・操作名（メソッド名）の左側に付けて可視性を表現する。

#### 3.クラス間の関係を表現
クラス間の「関連・多重度・誘導可能性・汎化（継承）・集約・コンポジション・依存・実現」といった関係性を、必要に応じて記述する。  
- 関連   
関連性の強いクラス同士を直線で結ぶ。線の上には「どういう関係なのか」を説明する関連名を付ける。  
- 多重度  
クラスAとBがあった場合「クラスAから作られる複数のオブジェクトがクラスB（のオブジェクト）へ関係を持つが、クラスBから作られるひとつのオブジェクトしかクラスA（のオブジェクト）と関係しない」という状況のことを指す。m～nまでの数が関係し得るなら「m..n」と書く。相手クラスへ関係し得る数をクラス枠の横に記入する。
- 誘導可能性  
関連するクラス間でのやり取りが一方通行な場合、その方向性を表現する。クラスの間に線を引いて、影響を及ぼす側に向けて矢印を書き、影響を与えられない方には線の上にバツ印を書く。
- 汎化（継承）
「親クラスAの型・性質を継承した子クラスB」という関係性のことを指す。子クラスから親クラスに矢印（先端が「△ 」のように白抜きのもの）を向ける。  
- 集約  
関連クラス同士が「全体と部分の関係」にあることを表現する。全体のクラス側の先端にひし形「◇ 」のマークを書く。
- コンポジション  
集約よりも強い全体と部分の関係性を意味する。クラス間に線を引き、全体クラス側に向けて黒塗りのひし形「◆ 」を書く。  
- 依存  
「クラスAがクラスBに依存して影響を受ける」関係を表現する。クラス間を点線で結び、依存先から依存元に向けて矢印を書く。「関連」はクラス同士を１つの構造と捉えるが、「依存」はクラス同士が一時的に関係する場合を示す。  
- 実現  
インターフェース「抽象クラスAを具体的に実装したものが、クラスBである」という関係である。クラス間を点線で結び、実現クラスから抽象クラスに向けて白塗り三角の矢印を書く。

## 参考
<a>https://product.strap.app/magazine/post/knowhow_class-diagram</a>  

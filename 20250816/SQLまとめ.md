# SQL

## 1.概要・学習目的  
概要：SQL学習（progateのI, II）      
目的：データベースを扱う時の言語として学ぶ

## 2.基本文法・ポイント  
### データベースとは
テキストや数値などのデータを保存するためのツール。  
データベースを管理している表を「テーブル」と呼ぶ。縦の列を「カラム」、横の行を「レコード」と呼ぶ。

### クエリとは
データベースに送る命令。SQLとは、クエリを書くための言語。  
クエリの最後には、セミコロン（;）をつける。

#### 特定のデータを取得するクエリの種類
- データベースからデータを取得「SELECT カラム名」（どのカラムのデータを取得するか）。復数のカラムを指定するときはコンマで区切る。全カラムのデータを取得するときは「*」。
- SELECTで選んだカラムがどのテーブルのカラムか指定「FROM テーブル名」
- 特定のデータを取得「WHERE カラム名 = 〇〇」（どこのレコードを取得するか）。〇〇のデータ型がテキストや日付の場合はクォーテーションで囲み、数値の場合はそのまま記述。WHEREの条件では、=のほかに比較演算子を使うことも可能。ANDやORで復数の条件を指定可能。
- ある文字を含むデータを取得「WHERE カラム名 LIKE 文字列」（指定したカラムが〇〇を含むレコード）
- ワイルドカード（どんな文字列にも一致することを指す記号）で、「%文字列%」は文字列を含むすべてのデータ、「文字列%」は前方一致、「%文字列」は後方一致。  
- 〇〇を含まないデータ「WHERE NOT 条件」
- NULLデータの取得「WHERE カラム名 IS NULL」
- NULL以外のデータの取得「WHERE カラム名 IS NOT NULL」
- 必要な数だけデータを取得「LIMIT データ件数」。WHEREの後に記述する。

#### 取得したデータの並び替え
「ORDERD BY 並べ替えたいカラム名 並べ方;」  
- 昇順「ASC」
- 降順「DESC」
WHEREと併用可能。WHEREの後に記述する。

#### 取得データの重複を取り除く
「DISTINCT(カラム名)」  
```
SELECT DISTINCT(カラム名)
FROM テーブル名;
```

#### 取得データを計算する
四則演算をSELECTで取得するカラムに使用すると、計算後のデータが取得できる。
```
SELECT カラム名 * 1.08
FROM テーブル名;
```

#### 集計関数
WHEREで検索したデータに集計関数を使うと、データの合計や平均などの集計結果が得られる。  
- 数値の合計「SUM(カラム名)」
- 数値の平均「AVG(カラム名)」
- データの合計数「COUNT(カラム名)」。nullのデータの数は含まない。nullを含むデータの数を計算したい場合は、「COUNT(*)」
- 最大値を取得「MAX(カラム名)」
- 最小値を取得「MIN(カラム名)」

#### データをグループ化する
データのグループ化「GROUP BY カラム名」。指定したカラムで、完全に同一のデータを持つレコード同士が同じグループになる。  
GROUP BYを使う場合、SELECTで使えるのは、GROUP BYに指定しているカラム名と集計関数のみ。  
復数のグループを作るために復数のカラム名を指定する場合は、カラム名をコンマで区切る。集計関数により、各グループごとにデータを集計可能。  
##### グループ化したデータをさらに絞り込む
GROUP BYでグループ化したデータをさらに絞る場合は、「GROUP BY カラム名 HAVING 条件」。  
SQLのコマンド実行順は、検索「WHERE」→  グループ化「GROUP BY」→  関数 →  HAVING。  
WHEREはグループ化される前のテーブル全体を検索対象とするが、HAVINGはGROUP BYによってグループ化されたデータを検索対象とする。


## 3.エラー・詰まった点  
特になし 

## 4.気づき・メモ  
- SQLのコマンド実行順序を意識すると、クエリを書くときに混乱しにくい
- NULLの指定は=を使えない 

## 5.次にやること  
- SQLレッスン（III, I, IV）のまとめ 
復数テーブルを利用したデータ取得（サブクエリとJOIN）、データの追加・更新・削除の方法。

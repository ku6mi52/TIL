# Dockerまとめ（コンテナ作成編）

## 学習目的
きっかけ：個人開発をしていてDockerについての理解が浅いと感じたから。  
目的：Dockerを理解して、使いこなせるようになる。

## Dockerとは
コンテナを作成・実行するためのソフトウェアシステム/クライアント・サーバーシステム。Dockerクライアント、Dockerデーモン、レジストリの3要素で構成されている。  
Dockerクライアントがdockerコマンド操作をし、そのリクエストをDockerデーモンと呼ばれるソフトウェアが受け取る。イメージはコンテナを作成するためのテンプレート（コンテナに必要なファイルの集合体）であり、Docker Hubなどのレジストリからプルする。

### dokcerコマンド
dockerコマンドの基本「docker 対象 操作」
対象は、container（コンテナ）, compose（複数のコンテナ）, image（イメージ）, network（ネットワーク）, volume（ボリューム）がある。  
操作は、up, run, start, stop, rm, down, build, ls, pull, push, createなどがある。

### イメージをプルする
- タグ指定なしだと、最新版のイメージがプルされる。`docker image pull イメージ名`  
- タグ指定する場合は、`docker image pull イメージ名:タグ名`  

### コンテナのライフサイクル
1. イメージからコンテナを作成（動作やアクセス不可）`docker container create`  
2. 実行（コンテナを動作させた状態）`docker container run`
3. 停止（停止後、再度実行可能）  
4. 削除（再度実行したければ、コンテナの再作成が必要）

## 最小実験
### 目的
dockerコマンドでApacheコンテナを作成・停止・削除する。

### 手順
- runは、イメージがダウンロードされていない場合、イメージをプルしてからコンテナを作成・実行`docker container run --name apache01 -p 8080:80 -d httpd`  
- コンテナが作成されたかWebブラウザから確認（http://localhost:8080/）  
- コンテナを停止`docker container stop apache01`  
- コンテナを削除`docker container rm apache01`  

### 結果
- コンテナを作成・実行したら、Webブラウザで「It works!」と表示された。  
- コンテナを停止したら、Webブラウザでエラーメッセージが表示された。  
- コンテナを削除したら、デスクトップからコンテナが消えた。

## まとめ
- コンテナとは、1つの物理マシン内で互いに隔離された複数の仮想サーバーを構築できる特殊なプロセス  
- dockerとは、コンテナを作成・実行するソフトウェアで、コマンドやデスクトップで操作可能

## 次にやること
コマンドやオプションをファイルにまとめてコンテナを作成するDocker Composeというソフトウェアについて学ぶ。

## 参考
書籍「Docker仮想サーバー完全入門 Webクリエイター＆エンジニアの作業がはかどる開発環境構築ガイド」

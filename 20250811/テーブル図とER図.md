# テーブル図とER図について

## テーブル図とは

## ER図とは
E(Entityの略)、R(Rerationshipの略)の組み合わせで、システムのデータやデータ間の処理構造を設計した図。  
テーブルとテーブルを線でつなぎ、中身の種類と関係性見やすくしたもの。  
ER図はシステムの上流工程で段階的に設計し、各工程で作成するER図の状態のことを「データモデル」と呼ぶ。
### ER図のメリット
- システム全体の構造を俯瞰できるため、後戻りのコストを防げる
- 運用・保守フェーズで、仕様変更などの改修に素早く対応可能

### 概念モデル
要件定義工程で作成するデータモデル。最初にシステム全体における「もの」や「できごと」をエンティティ、リレーションシップとして洗い出し、概要を表したもの。
#### 概念モデルの書き方
1. システムに登場するモノを洗い出し、エンティティとして定義する。  
- リソースエンティティ（最終的にマスタテーブルとなる、システム基本データを管理するエンティティ）  
- イベントエンティティ（最終的にはトランザクションテーブルとなる、システムの業務データを管理するエンティティ）  
2. エンティティ間の関係を考え、関係あるエンティティ間にリレーションシップ（関連線）を引く。  
- 依存リレーションシップ
- 非依存リレーションシップ
- 多対多リレーションシップ

### 論理モデル
基本設計工程で作成するデータモデル。論理モデルでは概念モデルに対してさまざまな肉付けを行う。具体的には属性（アトリビュート）、アイデンティファイア（主キー）、外部キーの定義や、リレーションシップにカーディナリティといった要素を追加する。特定のデータベースに依存しないレベルで具体化した状態。
#### 論理モデルの書き方
 アトリビュート（エンティティ内で管理する具体的なデータ項目）を追加する。  
- アイデンティファイア（エンティティのレコードの識別子となるアトリビュート）
- 外部キー（リレーションシップが設定されている場合は、親エンティティのアイデンティファイアとなるアトリビュートを子エンティティにも追加すること）
- カーディナリティ（リレーションシップで結ばれた両エンティティの数の関係）

### 物理モデル
詳細設計工程で作成するデータモデル。Oracle Database等の特定の物理データベース向けに論理モデルの変換を行う。ER図の最終形態。
#### 物理モデルの書き方  
1. 仲介エンティティの追加  
2. 属性ごとにデータ型（「数値、文字、日付」の３種類）の追加  
3. エンティティ名、アトリビュートをアルファベットに変換  
4. 正規化  
- 第一正規化（繰り返しが発生している属性をなくす作業）
- 第二正規化（ある主キーとみなせる属性に従属する属性を探し、別エンティティに分割する作業）
- 第三正規化 （主キーでない属性の中から新たに主キー属性となるべきものがないか探し、新たな主キーに従属する項目を別エンティティに分割する作業）


## 参考
<a>https://products.sint.co.jp/ober/blog/create-er-diagram</a>


